<div class="container my-5">
  <div class="row justify-content-center">
    <div class="col-lg-10">
      <div class="todo-container bg-white">
        <!-- En-tête -->
        <div class="todo-header">
          <h4 class="mb-0">Liste des Tâches</h4>
        </div>

        <!-- Loading -->
        <div *ngIf="loading" class="text-center my-5 py-4">
          <div class="spinner-border spinner-custom" role="status"></div>
          <p class="mt-3 loading-text">Chargement des tâches...</p>
        </div>

        <!-- Erreur -->
        <div *ngIf="!loading && errorMessage" class="alert alert-danger alert-custom">
          <i class="fas fa-exclamation-circle me-2"></i>
          {{ errorMessage }}
        </div>

        <!-- Liste des todos -->
        <div *ngIf="!loading && todos.length > 0" class="todo-list">
          <div *ngFor="let todo of todos" class="todo-item">
            <div class="d-flex justify-content-between align-items-start">
              <div class="flex-grow-1">
                <h5 class="todo-title">{{ todo.title }}</h5>
                <p class="todo-description">{{ todo.description }}</p>

                <div class="todo-meta">
                  <span class="badge badge-custom">
                    <i class="fas fa-tag"></i>{{ todo.category || 'Aucune catégorie' }}
                  </span>

                  <span class="badge badge-custom">
                    <i class="fas fa-flag"></i>{{ todo.priority || 'Aucune' }}
                  </span>

                  <span [class]="todo.isComplete ? 'status-complete' : 'status-incomplete'">
                    <i class="fas fa-circle-check"></i>
                    {{ todo.isComplete ? 'Complété' : 'Incomplet' }}
                  </span>

                  <span class="due-date">
                    <i class="fas fa-calendar-day"></i>
                    {{ todo.dueDate | date:'shortDate' }}
                  </span>
                </div>
              </div>

              <div class="dropdown">
                <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                  <i class="fas fa-ellipsis-v"></i>
                </button>
                <ul class="dropdown-menu dropdown-menu-end">
                  <li><a class="dropdown-item" href="#"><i class="fas fa-edit"></i>Modifier</a></li>
                  <li><a class="dropdown-item" href="#"><i class="fas fa-trash-alt"></i>Supprimer</a></li>
                </ul>
              </div>
            </div>
          </div>
        </div>

        <!-- Pas de tâches -->
        <div *ngIf="!loading && todos.length === 0 && !errorMessage" class="alert alert-info alert-custom mx-3 my-3">
          <i class="fas fa-info-circle me-2"></i>
          Aucune tâche trouvée.
        </div>
      </div>
    </div>
  </div>
</div>
